<section
  id="newsletter"
  class="py-12 md:py-24 lg:py-32 bg-gradient-to-r from-purple-600 to-yellow-500 relative"
>
  <div class="container mx-auto px-4 md:px-6">
    <div class="flex flex-col items-center space-y-4 text-center">
      <svg
        class="h-12 w-12 text-white"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
        ></path>
      </svg>
      <h2
        class="text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl text-white"
      >
        Stay Updated with Web Dev Insights
      </h2>
      <p class="mx-auto max-w-[700px] text-white md:text-xl">
        Subscribe to my newsletter for the latest web development trends, tips,
        and exclusive insights to boost your digital presence.
      </p>
      <form id="form-news-letter" class="w-full max-w-md space-y-2">
        <input
          name="user_email"
          type="email"
          placeholder="Enter your email"
          class="w-full px-3 py-2 bg-white bg-opacity-10 text-white placeholder-white placeholder-opacity-70 border border-white border-opacity-20 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"
        />
        <button
          type="submit"
          class="w-full bg-white text-purple-600 hover:bg-neutral-200 font-bold py-3 px-6 rounded-md text-lg transition duration-300"
        >
          Subscribe Now
        </button>
      </form>
      <p class="text-sm text-white text-opacity-80">
        By subscribing, you agree to our Privacy Policy and consent to receive
        updates from us.
      </p>
    </div>
  </div>
</section>

<script>
  const form = document.getElementById(
    "form-news-letter"
  ) as HTMLFormElement | null;
  if (form) {
    form.addEventListener("submit", async (event) => {
      event.preventDefault();

      const data = {
        user_email: (form.elements.namedItem("user_email") as HTMLInputElement)
          .value,
        user_name: "newsletter",

        message: "newsletter",
      };

      try {
        const response = await fetch("/api/send-email", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data),
        });

        const result = await response.json();
        if (result.success) {
          alert("Message sent successfully!");
          form.reset(); // Limpia el formulario después del envío
        } else {
          alert("Error sending message. Please try again.");
        }
      } catch (error) {
        console.error("Error:", error);
        alert("There was an error sending the message. Please try again.");
      }
    });
  }
</script>
